
<!DOCTYPE html> 
<!--
	Noam's theme, based on Readnik scriptogr.am theme
-->
<html lang="en">
<head>
  <title>Noam Ross | Displaying Math in RSS feeds</title>
  <meta name="description" content=" " />
  <meta name="author" content="Noam Ross">
  <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;">
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="ROBOTS" content="INDEX,FOLLOW">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta charset="utf-8">
  <meta property="og:url" content="">
  <meta property="og:site_name" content="Noam Ross">
  <link rel="icon" type="image/x-icon" href="/assets/themes/noamblog/atom.ico">
  <link href="/assets/themes/noamblog/css/style.css" rel="stylesheet" type="text/css" media="all">
  <link href="http://feeds.feedburner.com/noamross" rel="alternate" type="application/rss+xml" title="Noam Ross" />
  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-30394461-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
 </script>
 <script type="text/javascript"> 
    function typeset() {
      MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
    }
    function disqus_config() {
      this.callbacks.onNewComment = [typeset];
      this.callbacks.onInit = [typeset];
    }
  </script>
  <script src="http://cachedcommons.org/javascripts/text/prettify-min.js" type="text/javascript"></script>
  <script src="http://cachedcommons.org/javascripts/text/showdown-min.js" type="text/javascript"></script>
  <script src="http://cachedcommons.org/javascripts/jquery/jquery.disqus.js" type="text/javascript"></script>
  <script type="text/javascript" src="/assets/themes/noamblog/app.js"></script>  
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"> </script>
  <script type="text/x-mathjax-config">  MathJax.Hub.Config({ "HTML-CSS": { availableFonts: ["TeX"], webfont: [null] }} ); </script>
  <script type="text/x-mathjax-config">  MathJax.Hub.Config({ TeX: { extensions: ["autobold.js"] }} ); </script>
  <script type="text/javascript">var switchTo5x=true;</script>
  <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
  <script type="text/javascript">stLight.options({publisher: "4376beef-ffcc-441e-a877-904acf7f379b", theme:'8', onhover:false, doNotHash:true, doNotCopy:true, hashAddressBar:false}); </script>
  <script type="text/javascript">
      function chgifr(url, iframe)  {
          document.getElementById(iframe).src = url;
      }
  </script>
  <script type="text/javascript">
      function showhide(id) {
           var e = document.getElementById(id);
           if(e.style.display == 'block')
              e.style.display = 'none';
           else
              e.style.display = 'block';
        }
  </script>
</head>
<body>
<div class="wrapper">
  <div class="blog">
 
      <div id="menu" class="menu-top">
        <div class="blog-info">
          <h1><a href="/index.html">Noam Ross</a></h1>
          <div class="blog-description">
           <h2>Real-time research in ecology, economics, and sustainability</h2>
          </div>
         </div>
          <div class="pages">
            
            <!-- Lockerz Share BEGIN -->
            <a class="a2a_dd" href="http://www.addtoany.com/share_save" tile"Share this Page"><span class="shareicon"><span class="hide">Share</span></span></a>
            <script type="text/javascript">
            var a2a_config = a2a_config || {};
            a2a_config.onclick = 0;
            a2a_config.show_title = 1;
            a2a_config.color_main = "FFFFFF";
            a2a_config.color_border = "FFFFFF";
            a2a_config.color_link_text = "45462f";
            a2a_config.color_link_text_hover = "575757";
            a2a_config.prioritize = ["twitter", "facebook", "tumblr", "email", "delicious", "linkedin", "stumbleupon", "google_plus"];
            </script>
            <script type="text/javascript" src="http://static.addtoany.com/menu/page.js"></script>
            <!-- Lockerz Share END -->
            
            <a href="http://feeds.feedburner.com/noamross" title="Subscribe via Feedburner RSS"> <span class="rssicon"> <span class="hide">RSS</span></span></a>
            
             
             
            


  
    
  
    
    	
    	<a href="/about.html">About</a>
    	
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
    	
    	<a href="/connect.html">Connect</a>
    	
    
  
    
  
    
    	
    	<a href="/index.html">Blog</a>
    	
    
  
    
  
    
  
    
    	
    	<a href="/publications.html">Publications</a>
    	
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
    	
    	<a href="/tags.html">Topics</a>
    	
    
  
    
  



            
        </div>
      </div>

      <div class="container">

        <div class="content">
          
<div id="headblock">
<h1 id="page.title"><a href="/blog/2012/4/4/math-in-rss-feeds.html">Displaying Math in RSS feeds</a></h1>
<p>by <em>Noam Ross</em>, 04 April 2012</p>
<hr />
</div>
<div class="contenttext"><p><p>The equations in this blog are rendered using <a href="http://www.mathjax.org">MathJax</a>, which creates beautiful math from <span class="math">\(\LaTeX\)</span>-style markup. However, the math doesn’t appear in RSS feeds, because RSS doesn’t allow Javascript. While I have a total of 12 RSS followers, this is how my closest collaborators, and my most math-y readers, are likely to read my posts, so I’ve been looking for a way to produce readable equations in the RSS feed.</p>
<p>Since I switched producing my website with <a href="http://github.com/mojombo/jekyll">Jekyll</a>, I have access to the RSS-XML file itself. I realized I could post-process this to make the math readable by replacing MathJax with images.</p>
<p><a href="www.codecogs.com/latex/eqneditor.php">Codecogs</a> can produce image files from <span class="math">\(\LaTeX\)</span>-style math just by calling a URL. To use this on a website, the format is:</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;img</span><span class="ot"> src=</span><span class="st">&quot;http://latex.codecogs.com/png.latex?SOME LATEX&quot;</span><span class="ot"> alt=</span><span class="st">&quot;SOME LATEX&quot;</span> <span class="kw">/&gt;</span></code></pre>
<p>or, for inline equations</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;img</span><span class="ot"> src=</span><span class="st">&quot;http://latex.codecogs.com/png.latex?\inline SOME LATEX&quot;</span><span class="ot"> alt=</span><span class="st">&quot;\inline SOME LATEX&quot;</span> <span class="kw">/&gt;</span></code></pre>
<p>The <code>alt=</code> means that the raw <span class="math">\(\LaTeX\)</span> should show up in the RSS feed if images fail or are slow to render. Now, for XML, these need to be modified slightly for forbidden characters (<code>&lt;&gt;&amp;'&quot;</code>).</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="dv">&amp;lt;</span>img src=<span class="dv">&amp;quot;</span>http://latex.codecogs.com/png.latex?SOME LATEX<span class="dv">&amp;quot;</span> alt=<span class="dv">&amp;quot;</span>SOME LATEX1<span class="dv">&amp;quot;</span> /<span class="dv">&amp;gt;</span>
<span class="dv">&amp;lt;</span>img src=<span class="dv">&amp;quot;</span>http://latex.codecogs.com/png.latex?\inline SOME LATEX<span class="dv">&amp;quot;</span> alt=<span class="dv">&amp;quot;</span>SOME LATEX<span class="dv">&amp;quot;</span> /<span class="dv">&amp;gt;</span></code></pre>
<p>Forbidden characters are already converted in the <span class="math">\(\LaTeX\)</span> equations themselves, because they’ve gone through Jekyll’s <code>xml_escape</code> function. Also, I want inline equations to be vertically centered, so I add <code>style=&quot;vertical-align:middle&quot;</code> for the inline equations.</p>
<p>I now need to search the Jekyll-produce-XML file for equations, which are contained by <code>\[</code> and <code>\]</code>, or <code>\(</code> and <code>\)</code>, and replace them with the codecogs call. (Of course, the previous sentence will cause an error here). Normally I’d use ‘sed’, but the regular expression is a bit complicated for it, so I use perl instead:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">perl</span> -pi -e <span class="st">&#39;s|(\\\[)(.*?)(\\\])|&amp;lt;img src=&amp;quot;http://latex.codecogs.com/png.latex?\2&amp;quot; alt=&amp;quot;\2&amp;quot; /&amp;gt;|g&#39;</span> _site/blog/*.xml
<span class="kw">perl</span> -pi -e <span class="st">&#39;s|(\\\()(.*?)(\\\))|&amp;lt;img style=&amp;quot;vertical-align:middle&amp;quot; src=&amp;quot;http://latex.codecogs.com/png.latex?\\inline \2&amp;quot; alt=&amp;quot;\2&amp;quot; /&amp;gt;|g&#39;</span> _site/blog/*.xml</code></pre>
<p>These commands do the replacement on all the XML files in the directory, so if I have multiple RSS feeds it will handle them all.</p>
<p>Now equations like this: <span class="math">\(x^2\)</span>, and below should display in RSS!:</p>
<p><span class="math">\[\frac{dK}{dt} = \delta \left(\frac{P_t h_t - TC^I_t - \pi^I_t}{K_t}\right)\]</span></p>
<p>The only thing to remember is that display equations need to be separated by multiple line breaks, or they will display side by side in RSS.</p>
<p>This is sort an inelegant hack and only works if you are running jekyll locally, but someone could potentially write a jekyll extension so you could include something like <code>{{ &quot;{{post.content | xml_escape | math_in_rss &quot;}}}}</code> in your RSS template.</p>
<p><strong>Update (April 6, 2012)</strong>: Per Christian’s suggestion, I’ve wrapped the display equations in <code>div</code> tags so they center and each have a separate line. The script now looks like this:</p>
<pre class="sh"><code>perl -pi -e &#39;s|(\\\[)(.*?)(\\\])|&amp;lt;div style=&amp;quot;text-align:center;&amp;quot;&amp;gt;&amp;lt;img src=&amp;quot;http://latex.codecogs.com/png.latex?\2&amp;quot; alt=&amp;quot;\2&amp;quot; /&amp;gt;&amp;lt;/div&amp;gt;|g&#39; _site/blog/*.xml
perl -pi -e &#39;s|(\\\()(.*?)(\\\))|&amp;lt;img style=&amp;quot;vertical-align:middle&amp;quot; src=&amp;quot;http://latex.codecogs.com/png.latex?\\inline \2&amp;quot; alt=&amp;quot;\2&amp;quot; /&amp;gt;|g&#39; _site/blog/*.xml</code></pre></p></div>
<ul class="tags">
  
    <li><strong>Tags: </strong></li>
    
    <li><a href="/tags.html#rss-ref">rss</a></li>
    
    <li><a href="/tags.html#blog-ref">blog</a></li>
    
    <li><a href="/tags.html#jekyll-ref">jekyll</a></li>
    
    <li><a href="/tags.html#code-ref">code</a></li>
    
    <li><a href="/tags.html#math-ref">math</a></li>
    
    <li><a href="/tags.html#mathjax-ref">mathjax</a></li>
      
</ul>



  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'noamrossgh'; // required: replace example with your forum shortname
    var disqus_identifier = '/blog/2012/4/4/math-in-rss-feeds.html';
    var disqus_url = 'http://www.noamross.net/blog/2012/4/4/math-in-rss-feeds.html';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>





<div class="noprint"><hr />
<p> <strong>Previous Post</strong>: <em><a href="/blog/2012/4/2/exploring-pollen-data-knit.html">Exploring Pollen Data</a></em> </p>
<p> <strong>Next Post</strong>: <em><a href="/blog/2012/4/20/lecture-from-holly-doremus---adaptive-management.html">Holly Doremus on Adaptive Management</a></em> </p></div>



        </div>
    

      </div>
      
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script type="text/javascript" src="/assets/themes/noamblog/footnote-links.js"></script>
<script type="text/javascript">$('div.contenttext').footnoteLinks();</script>
</body>
</html>
